## 问题梳理
- 列表命令引用未声明的选项：`options.output`、`options.dir`、`options.dryRun` 在 `release list` 中被使用，但未在该子命令定义。
  - 位置：`src/commands/release/index.ts:118`、`148`、`159`
- 下载命令的 `--interactive` 无效：`release download` 即使加了 `-i`，也不触发交互流程，且当缺少 `name` 直接报错。
  - 位置：`src/commands/release/index.ts:479-485`、`471`
- 列表交互发布无二次确认：`release list` 在选中条目后直接执行发布或下载，没有确认提示。
  - 位置：`src/commands/release/index.ts:146-186`
- 解压前未确保目标目录存在：发布到目录时未显式创建目标目录，部分平台命令不一定自动创建。
  - 位置：`src/commands/release/index.ts:178`、`438`
- 名称校验可更严格：仅检查分隔符与 `..`，建议 `trim` 并限制空白与非法字符，必要时要求 `.zip` 扩展名。
  - 位置：`src/commands/release/index.ts:405-411`
- Hooks 摘要与开关不一致：即使 `--no-hooks`，交互摘要仍按全部 Hook 统计展示，建议明确显示已禁用。
  - 位置：`src/commands/release/index.ts:339-378`

## 改动目标
- 统一并完善交互体验：所有涉及“发布/下载”的交互操作在执行前均有确认；支持 `--yes` 快速跳过。
- 选项对齐：为 `release list` 补齐 `-o/--output`、`-d/--dir`、`-D/--dry-run`，与 `publish/download` 保持一致。
- 下载命令交互化：当 `--interactive` 或未提供 `name` 时，提供列表选择、关键词过滤、目录输入与确认流程。
- 稳健性增强：发布/解压前确保目标目录存在，名称校验更健壮。

## 实施步骤
1. 为 `release list` 增加选项并接线
   - 新增：`-o, --output <dir>` 用于交互下载目标目录；`-d, --dir <dir>` 用于交互发布目录；`-D, --dry-run` 启用演练模式。
   - 使用处修复：`src/commands/release/index.ts:118`、`148`、`159`。
2. 在列表交互中加入确认
   - `oss` 分支：在 `download/publish` 执行前调用 `confirm(message, defaultYes)`；支持 `options.yes` 跳过。
   - 位置：`src/commands/release/index.ts:116-186`。
3. 下载命令交互实现
   - 当 `!name || options.interactive === true`：
     - 调用 Provider 列表，阈值过滤与关键词筛选（沿用 `listLargeThreshold` 与 `inputText`）。
     - 使用 `pickFromList` 选择条目；使用 `inputDir` 输入输出目录并做 `allowedTargetDirPrefix` 校验。
     - 执行前 `confirm`（支持 `--yes`）。
   - 位置：`src/commands/release/index.ts:478-521`。
4. 目录与名称的稳健性处理
   - 发布/下载前：`fs.mkdirSync(targetDir, { recursive: true })` / `fs.mkdirSync(outputDir, { recursive: true })`；
   - 对 `name` 执行 `trim()` 并在必要时限制扩展名（例如 `.zip`）。
   - 位置：发布主命令 `src/commands/release/index.ts:419-445` 与列表交互发布 `:167-185`、下载 `:129-144`、下载子命令 `:503-516`。
5. Hooks 摘要与开关一致性
   - 当 `options.hooks === false`：摘要输出加注 `[hooks: disabled]` 或减少详细列表。
   - 位置：`src/commands/release/index.ts:339-378`。
6. 细节一致性
   - 复用已创建的 Provider 实例，避免重复创建（`oss` 分支）。
   - 将 `name` 与 `dir` 的提示文本保持一致；错误信息更具体（例如指明缺少选项）。

## 测试策略
- 单元测试：
  - 名称校验与路径校验；`normalizePath` 前缀验证。
- 集成测试（Vitest）：
  - 模拟交互：`vi.mock('inquirer')`；验证 `--yes` 跳过确认；
  - `release list`：`-D` 下不执行实际 Provider；
  - `release download`：在未提供 `name` 时交互选择成功并创建文件路径（可用临时目录）。
- 质量脚本：`pnpm qa`、`pnpm test`、`pnpm build`。

## 预期收益
- 选项与行为一致，用户心智负担更低；
- 交互安全性提升，避免误操作；
- 跨平台稳健性增强，减少目录/解压相关失败；
- 测试覆盖交互路径，降低回归风险。